<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Jeu : Trouve l'intrus - Les H√©ros Invisibles</title>
  <style>
    * {
      box-sizing: border-box;
    }
    
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      text-align: center;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: #2c3e50;
      padding: 15px;
      margin: 0;
      min-height: 100vh;
    }
    
    .container {
      max-width: 900px;
      margin: 0 auto;
      background: rgba(255, 255, 255, 0.95);
      border-radius: 20px;
      padding: 25px;
      box-shadow: 0 15px 35px rgba(0,0,0,0.1);
      backdrop-filter: blur(10px);
    }
    
    h1 {
      background: linear-gradient(45deg, #27ae60, #2ecc71);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      font-size: 2rem;
      margin-bottom: 15px;
      line-height: 1.2;
      font-weight: 700;
      text-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    
    .subtitle {
      font-size: 1.2rem;
      margin-bottom: 25px;
      color: #34495e;
      font-weight: 500;
      padding: 0 15px;
      line-height: 1.4;
    }
    
    #level-buttons {
      margin: 25px 0;
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 15px;
    }
    
    #level-buttons button {
      padding: 15px 25px;
      background: linear-gradient(45deg, #27ae60, #2ecc71);
      border: none;
      color: white;
      border-radius: 15px;
      cursor: pointer;
      font-size: 1.1rem;
      font-weight: 600;
      transition: all 0.3s ease;
      min-width: 120px;
      box-shadow: 0 5px 15px rgba(39, 174, 96, 0.3);
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }
    
    #level-buttons button:hover {
      transform: translateY(-3px);
      box-shadow: 0 8px 25px rgba(39, 174, 96, 0.4);
      background: linear-gradient(45deg, #2ecc71, #27ae60);
    }
    
    #level-buttons button:active {
      transform: translateY(-1px);
    }
    
    .score-container {
      margin: 20px 0;
      display: none;
    }
    
    .score {
      font-size: 1.4rem;
      font-weight: bold;
      padding: 12px 25px;
      background: linear-gradient(45deg, #3498db, #2980b9);
      color: white;
      border-radius: 25px;
      display: inline-block;
      box-shadow: 0 4px 15px rgba(52, 152, 219, 0.3);
      min-width: 150px;
    }
    
    .game-area {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
      gap: 15px;
      margin: 30px 0;
      padding: 0 10px;
    }
    
    .item {
      background: linear-gradient(145deg, #ffffff, #f8f9fa);
      border: 3px solid #27ae60;
      border-radius: 15px;
      min-height: 100px;
      display: flex;
      justify-content: center;
      align-items: center;
      cursor: pointer;
      font-size: 1.1rem;
      font-weight: 600;
      transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
      padding: 15px;
      text-align: center;
      word-wrap: break-word;
      box-shadow: 0 5px 15px rgba(0,0,0,0.1);
      line-height: 1.3;
      color: #2c3e50;
      position: relative;
      overflow: hidden;
    }
    
    .item::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,0.4), transparent);
      transition: left 0.5s;
    }
    
    .item:hover::before {
      left: 100%;
    }
    
    .item:hover {
      transform: translateY(-5px) scale(1.03);
      box-shadow: 0 10px 25px rgba(39, 174, 96, 0.2);
      border-color: #2ecc71;
    }
    
    .item:active {
      transform: translateY(-2px) scale(1.01);
    }
    
    .message {
      margin: 25px auto;
      font-weight: 600;
      font-size: 1.3rem;
      padding: 20px;
      border-radius: 15px;
      max-width: 90%;
      line-height: 1.4;
      min-height: auto;
      transition: all 0.3s ease;
      opacity: 0;
      transform: translateY(20px);
    }
    
    .message.show {
      opacity: 1;
      transform: translateY(0);
    }
    
    .message.success {
      background: linear-gradient(135deg, #d4edda, #c3e6cb);
      color: #155724;
      border: 2px solid #b8daff;
      box-shadow: 0 5px 15px rgba(21, 87, 36, 0.1);
    }
    
    .message.error {
      background: linear-gradient(135deg, #f8d7da, #f5c6cb);
      color: #721c24;
      border: 2px solid #f1b0b7;
      box-shadow: 0 5px 15px rgba(114, 28, 36, 0.1);
    }
    
    .info {
      margin: 25px auto;
      font-size: 1rem;
      text-align: left;
      padding: 25px;
      background: linear-gradient(135deg, #e8f8f5, #d1f2eb);
      border: 2px solid #27ae60;
      border-radius: 15px;
      max-width: 90%;
      line-height: 1.6;
      white-space: pre-line;
      box-shadow: 0 5px 15px rgba(39, 174, 96, 0.1);
      display: none;
    }
    
    .info.show {
      display: block;
      animation: slideIn 0.5s ease;
    }
    
    @keyframes slideIn {
      from {
        opacity: 0;
        transform: translateY(30px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
    
    .progress-bar {
      width: 100%;
      height: 6px;
      background: #ecf0f1;
      border-radius: 3px;
      margin: 20px 0;
      overflow: hidden;
      display: none;
    }
    
    .progress-fill {
      height: 100%;
      background: linear-gradient(45deg, #27ae60, #2ecc71);
      width: 0%;
      transition: width 0.5s ease;
      border-radius: 3px;
    }
    
    .game-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      flex-wrap: wrap;
      margin: 20px 0;
      gap: 15px;
    }
    
    .level-indicator {
      font-size: 1.1rem;
      font-weight: 600;
      color: #34495e;
      padding: 8px 15px;
      background: #f8f9fa;
      border-radius: 20px;
      border: 2px solid #e9ecef;
    }
    
    /* Responsive Design */
    @media (max-width: 480px) {
      .container {
        margin: 10px;
        padding: 20px;
        border-radius: 15px;
      }
      
      h1 {
        font-size: 1.7rem;
      }
      
      .subtitle {
        font-size: 1.1rem;
      }
      
      .game-area {
        grid-template-columns: repeat(2, 1fr);
        gap: 12px;
      }
      
      .item {
        min-height: 80px;
        font-size: 1rem;
        padding: 12px;
      }
      
      #level-buttons button {
        font-size: 1rem;
        padding: 12px 20px;
        min-width: 100px;
      }
      
      .game-header {
        flex-direction: column;
        text-align: center;
      }
    }
    
    @media (min-width: 768px) {
      .game-area {
        grid-template-columns: repeat(4, 1fr);
      }
      
      .item {
        min-height: 120px;
        font-size: 1.2rem;
      }
      
      h1 {
        font-size: 2.5rem;
      }
      
      .subtitle {
        font-size: 1.3rem;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>‚≠ê Trouve l'intrus : Les H√©ros Invisibles ‚≠ê</h1>
    <p class="subtitle">Le but ? D√©masquer l'insecte en danger pour mieux le prot√©ger !</p>
    
    <div id="level-buttons">
      <button onclick="startGame('facile')">üå± Facile</button>
      <button onclick="startGame('moyen')">üåø Moyen</button>
      <button onclick="startGame('difficile')">üå≥ Difficile</button>
    </div>
    
    <div class="game-header" id="gameHeader" style="display: none;">
      <div class="level-indicator" id="levelIndicator"></div>
      <div class="score-container">
        <div class="score" id="scoreDisplay">Score: 0</div>
      </div>
    </div>
    
    <div class="progress-bar" id="progressBar">
      <div class="progress-fill" id="progressFill"></div>
    </div>
    
    <div class="game-area" id="gameArea"></div>
    <div class="message" id="message"></div>
    <div class="info" id="info"></div>
  </div>

  <script>
    const commons = ["Mouche domestique","Fourmi","Papillon commun"];
    const descriptions = {
      "M√©lib√©e": `üêõ **M√©lib√©e** (en danger)
- Habitat : Prairies humides de moyenne montagne.
- Identifie-la : Ailes gris-brun, ocelles cercl√©s d'orange, 3 cm.
- Enjeu : Pollinise le tr√®fle, base de la cha√Æne alimentaire.
- Comment aider : Prot√®ge zones humides, plante des gramin√©es locales.`,
      "Agrion bleuissant": `üíß **Agrion bleuissant** (menac√©)
- Habitat : Ruisseaux peu profonds.
- Look : Corps bleu et noir annel√©, vole pr√®s de l'eau.
- Enjeu : Chasseur de moustiques, indique eau propre.
- Aide : Cr√©e zones tampons, limite engrais chimiques.`,
      "Cordulie splendide": `‚ú® **Cordulie splendide** (menac√©e)
- Habitat : Zones m√©diterran√©ennes, mares.
- Identifie-la : Corps m√©tallique, yeux verts.
- R√¥le : R√©gule moustiques.
- Aide : Pr√©serve mares, stoppe pollution lumineuse.`,
      "Serratella mesoleuca": `üí¶ **Serratella mesoleuca** (en voie de protection)
- Habitat : Rivi√®res courantes.
- Identifie-la : Tronc d'√©ph√©m√®re 3‚Äë35 mm, ailes d√©licates.
- R√¥le : Nourrit poissons, bio-indicateur.
- Aide : Restaure berges, limite dragage.`,
      "Vanesse des pari√©taires": `ü¶ã **Vanesse des pari√©taires** (menac√©e)
- Habitat : Talus chauds, murs ensoleill√©s.
- Identifie-la : Ailes fauves tr√®s d√©coup√©es.
- R√¥le : Indique milieux secs.
- Aide : Plante pari√©taire, laisse pousser murs.`,
      "Halictus carinthiacus": `üå∏ **Halictus carinthiacus** (rare)
- Habitat : For√™ts, p√¢turages clairs.
- Identifie-le : 6‚Äë8 mm, ailes fum√©es.
- R√¥le : Pollinisation cibl√©e.
- Aide : Cr√©e abris au sol, plante fleurs sauvages.`,
      "Phasme du palmiste rouge": `üå¥ **Phasme du palmiste rouge** (end√©mique)
- Habitat : For√™t de La R√©union.
- Identifie-le : Corps vert-brun, sans ailes.
- R√¥le : √âquilibre √©cosyst√®me forestier.
- Aide : Prot√®ge aires bois√©es primaires.`
    };
    const levels = {
      facile: ["M√©lib√©e","Agrion bleuissant","Cordulie splendide","Serratella mesoleuca","Vanesse des pari√©taires"],
      moyen: ["Halictus carinthiacus","Phasme du palmiste rouge","M√©lib√©e","Agrion bleuissant","Cordulie splendide"],
      difficile: ["Serratella mesoleuca","Vanesse des pari√©taires","Halictus carinthiacus","Phasme du palmiste rouge","Agrion bleuissant"]
    };

    let score = 0, currentLevel = [], currentStep = 0, currentLevelName = '';
    const scoreDisplay = document.getElementById('scoreDisplay');
    const infoDiv = document.getElementById('info');
    const levelButtons = document.getElementById('level-buttons');
    const gameHeader = document.getElementById('gameHeader');
    const levelIndicator = document.getElementById('levelIndicator');
    const progressBar = document.getElementById('progressBar');
    const progressFill = document.getElementById('progressFill');

    function startGame(level) {
      currentLevel = levels[level];
      currentLevelName = level;
      currentStep = 0;
      score = 0;
      
      // Animation de transition
      levelButtons.style.display = 'none';
      gameHeader.style.display = 'flex';
      progressBar.style.display = 'block';
      
      updateScore();
      updateLevelIndicator();
      updateProgress();
      hideMessage();
      hideInfo();
      showStep();
    }

    function showStep() {
      hideInfo();
      hideMessage();
      
      const intrus = currentLevel[currentStep];
      const items = shuffle([...commons, intrus]);
      const gameArea = document.getElementById('gameArea');
      gameArea.innerHTML = '';

      items.forEach(item => {
        const div = document.createElement('div');
        div.className = 'item';
        div.textContent = item;
        div.onclick = () => handleClick(item, intrus, div);
        gameArea.appendChild(div);
      });
      
      updateProgress();
    }

    function handleClick(item, intrus, div) {
      const msg = document.getElementById('message');
      
      if (item === intrus) {
        score += 10;
        showMessage(`‚úÖ Bravo ! Tu as sauv√© : ${item}`, 'success');
        
        // Effet visuel sur le bon bouton
        div.style.background = 'linear-gradient(145deg, #d4edda, #c3e6cb)';
        div.style.borderColor = '#28a745';
        div.style.transform = 'scale(1.05)';
        
        currentStep++;
        updateScore();
        updateProgress();
        
        // D√©sactiver tous les boutons apr√®s une victoire
        const allItems = document.querySelectorAll('.item');
        allItems.forEach(btn => btn.style.pointerEvents = 'none');
        
        // Afficher les informations sur l'insecte
        setTimeout(() => {
          showInfo(descriptions[intrus]);
        }, 800);
        
        setTimeout(() => {
          if (currentStep < currentLevel.length) {
            showStep();
          } else {
            finishGame();
          }
        }, 3000);
      } else {
        score = Math.max(0, score - 5);
        showMessage(`‚ùå ${item} n'est pas en danger !`, 'error');
        updateScore();
        
        // Effet visuel temporaire sur le bouton mal cliqu√©
        const originalBg = div.style.background;
        const originalBorder = div.style.borderColor;
        const originalTransform = div.style.transform;
        
        div.style.background = 'linear-gradient(145deg, #f8d7da, #f5c6cb)';
        div.style.borderColor = '#dc3545';
        div.style.transform = 'scale(0.95)';
        
        // Remettre l'apparence normale apr√®s 1 seconde
        setTimeout(() => {
          div.style.background = originalBg;
          div.style.borderColor = originalBorder || '#27ae60';
          div.style.transform = originalTransform;
        }, 1000);
        
        // Effacer le message d'erreur apr√®s 2 secondes
        setTimeout(() => {
          hideMessage();
        }, 2000);
      }
    }

    function finishGame() {
      const gameArea = document.getElementById('gameArea');
      gameArea.innerHTML = '';
      
      let finalMessage = '';
      if (score >= 40) {
        finalMessage = `üèÜ Incroyable ! Score parfait : ${score} points !`;
      } else if (score >= 25) {
        finalMessage = `üéâ Excellent ! Tu as sauv√© beaucoup d'insectes : ${score} points !`;
      } else {
        finalMessage = `üëç Bien jou√© ! Continue d'apprendre : ${score} points !`;
      }
      
      showMessage(finalMessage, 'success');
      hideInfo();
      
      // R√©initialiser l'interface
      setTimeout(() => {
        gameHeader.style.display = 'none';
        progressBar.style.display = 'none';
        levelButtons.style.display = 'flex';
        hideMessage();
      }, 4000);
    }

    function updateScore() {
      scoreDisplay.textContent = `Score: ${score}`;
    }
    
    function updateLevelIndicator() {
      const levelNames = {
        facile: 'üå± Niveau Facile',
        moyen: 'üåø Niveau Moyen', 
        difficile: 'üå≥ Niveau Difficile'
      };
      levelIndicator.textContent = levelNames[currentLevelName];
    }
    
    function updateProgress() {
      const progress = (currentStep / currentLevel.length) * 100;
      progressFill.style.width = progress + '%';
    }
    
    function showMessage(text, type) {
      const msg = document.getElementById('message');
      msg.textContent = text;
      msg.className = `message ${type} show`;
    }
    
    function hideMessage() {
      const msg = document.getElementById('message');
      msg.className = 'message';
      setTimeout(() => {
        msg.textContent = '';
      }, 300);
    }
    
    function showInfo(text) {
      const info = document.getElementById('info');
      info.textContent = text;
      info.className = 'info show';
    }
    
    function hideInfo() {
      const info = document.getElementById('info');
      info.className = 'info';
      setTimeout(() => {
        info.textContent = '';
      }, 300);
    }

    function shuffle(arr) {
      return arr.sort(() => Math.random() - 0.5);
    }
  </script>
</body>
</html>
