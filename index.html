<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Jeu : Trouve l'intrus - Les H√©ros Invisibles</title>
  <style>
    * {
      box-sizing: border-box;
    }
    
    body {
      font-family: Arial, sans-serif;
      text-align: center;
      background-color: #f8f9fa;
      color: #2c3e50;
      padding: 15px;
      margin: 0;
      min-height: 100vh;
    }
    
    h1 {
      color: #27ae60;
      font-size: 1.8rem;
      margin-bottom: 15px;
      line-height: 1.2;
    }
    
    p {
      font-size: 1.1rem;
      margin-bottom: 20px;
      padding: 0 10px;
      line-height: 1.4;
    }
    
    #level-buttons {
      margin: 20px 0;
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 10px;
    }
    
    #level-buttons button {
      padding: 12px 20px;
      background-color: #27ae60;
      border: none;
      color: #fff;
      border-radius: 8px;
      cursor: pointer;
      font-size: 1.1rem;
      font-weight: 600;
      transition: all 0.2s ease;
      min-width: 100px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    }
    
    #level-buttons button:hover, #level-buttons button:active {
      background-color: #1e8449;
      transform: translateY(-2px);
      box-shadow: 0 4px 10px rgba(0,0,0,0.2);
    }
    
    .score {
      font-size: 1.4rem;
      margin: 15px 0;
      font-weight: bold;
      padding: 10px;
      background-color: #d1f2eb;
      border-radius: 8px;
      display: inline-block;
      min-width: 150px;
    }
    
    .game-area {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 15px;
      max-width: 400px;
      margin: 25px auto;
      padding: 0 10px;
    }
    
    .item {
      background-color: #ecf0f1;
      border: 3px solid #27ae60;
      border-radius: 12px;
      min-height: 80px;
      display: flex;
      justify-content: center;
      align-items: center;
      cursor: pointer;
      font-size: 1.1rem;
      font-weight: 600;
      transition: all 0.2s ease;
      padding: 15px;
      text-align: center;
      word-wrap: break-word;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
      line-height: 1.2;
    }
    
    .item:hover, .item:active {
      transform: scale(1.05);
      background-color: #d1f2eb;
      box-shadow: 0 4px 10px rgba(0,0,0,0.2);
    }
    
    .item:active {
      transform: scale(0.98);
    }
    
    .message {
      margin: 25px auto;
      font-weight: bold;
      font-size: 1.3rem;
      padding: 15px;
      border-radius: 8px;
      min-height: 60px;
      display: flex;
      align-items: center;
      justify-content: center;
      line-height: 1.3;
      max-width: 90%;
    }
    
    .success {
      background-color: #d4edda;
      color: #155724;
      border: 2px solid #c3e6cb;
    }
    
    .error {
      background-color: #f8d7da;
      color: #721c24;
      border: 2px solid #f5c6cb;
    }
    
    .info {
      margin: 20px auto;
      font-size: 1rem;
      text-align: left;
      padding: 20px;
      background-color: #d1f2eb;
      border: 2px solid #27ae60;
      border-radius: 8px;
      max-width: 90%;
      line-height: 1.5;
      white-space: pre-line;
    }
    
    /* Am√©lioration pour tr√®s petits √©crans */
    @media (max-width: 350px) {
      .game-area {
        grid-template-columns: 1fr;
        max-width: 280px;
      }
      
      .item {
        min-height: 70px;
        font-size: 1rem;
      }
      
      h1 {
        font-size: 1.6rem;
      }
      
      #level-buttons button {
        font-size: 1rem;
        padding: 10px 15px;
        min-width: 80px;
      }
    }
    
    /* Am√©lioration pour √©crans moyens */
    @media (min-width: 500px) {
      .game-area {
        grid-template-columns: repeat(3, 1fr);
        max-width: 600px;
      }
      
      .item {
        min-height: 90px;
        font-size: 1.2rem;
      }
      
      .info {
        max-width: 600px;
      }
    }
    
    /* Am√©lioration pour tablettes */
    @media (min-width: 768px) {
      .game-area {
        grid-template-columns: repeat(4, 1fr);
        max-width: 800px;
      }
      
      .item {
        min-height: 100px;
        font-size: 1.3rem;
      }
      
      h1 {
        font-size: 2.2rem;
      }
      
      p {
        font-size: 1.3rem;
      }
      
      .info {
        max-width: 700px;
        font-size: 1.1rem;
      }
    }
  </style>
</head>
<body>
  <h1>‚≠ê Trouve l'intrus : Les H√©ros Invisibles ‚≠ê</h1>
  <p>Le but ? D√©masquer l'insecte en danger pour mieux le prot√©ger !</p>
  <div id="level-buttons">
    <button onclick="startGame('facile')">Facile</button>
    <button onclick="startGame('moyen')">Moyen</button>
    <button onclick="startGame('difficile')">Difficile</button>
  </div>
  <div class="score" id="scoreDisplay" style="display:none;">Score: 0</div>
  <div class="game-area" id="gameArea"></div>
  <div class="message" id="message"></div>
  <div class="info" id="info"></div>

  <script>
    const commons = ["Mouche domestique","Fourmi","Papillon commun"];
    const descriptions = {
      "M√©lib√©e": `üêõ **M√©lib√©e** (en danger)
- Habitat : Prairies humides de moyenne montagne.
- Identifie-la : Ailes gris-brun, ocelles cercl√©s d'orange, 3 cm.
- Enjeu : Pollinise le tr√®fle, base de la cha√Æne alimentaire.
- Comment aider : Prot√®ge zones humides, plante des gramin√©es locales.`,
      "Agrion bleuissant": `üíß **Agrion bleuissant** (menac√©)
- Habitat : Ruisseaux peu profonds.
- Look : Corps bleu et noir annel√©, vole pr√®s de l'eau.
- Enjeu : Chasseur de moustiques, indique eau propre.
- Aide : Cr√©e zones tampons, limite engrais chimiques.`,
      "Cordulie splendide": `‚ú® **Cordulie splendide** (menac√©e)
- Habitat : Zones m√©diterran√©ennes, mares.
- Identifie-la : Corps m√©tallique, yeux verts.
- R√¥le : R√©gule moustiques.
- Aide : Pr√©serve mares, stoppe pollution lumineuse.`,
      "Serratella mesoleuca": `üí¶ **Serratella mesoleuca** (en voie de protection)
- Habitat : Rivi√®res courantes.
- Identifie-la : Tronc d'√©ph√©m√®re 3‚Äë35 mm, ailes d√©licates.
- R√¥le : Nourrit poissons, bio-indicateur.
- Aide : Restaure berges, limite dragage.`,
      "Vanesse des pari√©taires": `ü¶ã **Vanesse des pari√©taires** (menac√©e)
- Habitat : Talus chauds, murs ensoleill√©s.
- Identifie-la : Ailes fauves tr√®s d√©coup√©es.
- R√¥le : Indique milieux secs.
- Aide : Plante pari√©taire, laisse pousser murs.`,
      "Halictus carinthiacus": `üå∏ **Halictus carinthiacus** (rare)
- Habitat : For√™ts, p√¢turages clairs.
- Identifie-le : 6‚Äë8 mm, ailes fum√©es.
- R√¥le : Pollinisation cibl√©e.
- Aide : Cr√©e abris au sol, plante fleurs sauvages.`,
      "Phasme du palmiste rouge": `üå¥ **Phasme du palmiste rouge** (end√©mique)
- Habitat : For√™t de La R√©union.
- Identifie-le : Corps vert-brun, sans ailes.
- R√¥le : √âquilibre √©cosyst√®me forestier.
- Aide : Prot√®ge aires bois√©es primaires.`
    };
    const levels = {
      facile: ["M√©lib√©e","Agrion bleuissant","Cordulie splendide","Serratella mesoleuca","Vanesse des pari√©taires"],
      moyen: ["Halictus carinthiacus","Phasme du palmiste rouge","M√©lib√©e","Agrion bleuissant","Cordulie splendide"],
      difficile: ["Serratella mesoleuca","Vanesse des pari√©taires","Halictus carinthiacus","Phasme du palmiste rouge","Agrion bleuissant"]
    };

    let score = 0, currentLevel = [], currentStep = 0;
    const scoreDisplay = document.getElementById('scoreDisplay');
    const infoDiv = document.getElementById('info');
    const levelButtons = document.getElementById('level-buttons');

    function startGame(level) {
      currentLevel = levels[level];
      currentStep = 0;
      score = 0;
      levelButtons.style.display = 'none';
      scoreDisplay.style.display = 'block';
      updateScore();
      infoDiv.textContent = '';
      showStep();
    }

    function showStep() {
      infoDiv.textContent = '';
      const intrus = currentLevel[currentStep];
      const items = shuffle([...commons, intrus]);
      const gameArea = document.getElementById('gameArea');
      gameArea.innerHTML = '';
      document.getElementById('message').textContent = '';
      document.getElementById('message').className = 'message';

      items.forEach(item => {
        const div = document.createElement('div');
        div.className = 'item';
        div.textContent = item;
        div.onclick = () => handleClick(item, intrus, div);
        gameArea.appendChild(div);
      });
    }

    function handleClick(item, intrus, div) {
      const msg = document.getElementById('message');
      
      if (item === intrus) {
        score += 10;
        msg.textContent = `‚úÖ Bravo ! Intrus prot√©g√© : ${item}`;
        msg.className = 'message success';
        
        // Effet visuel sur le bon bouton
        div.style.backgroundColor = '#d4edda';
        div.style.borderColor = '#28a745';
        
        currentStep++;
        updateScore();
        
        // D√©sactiver tous les boutons apr√®s une victoire
        const allItems = document.querySelectorAll('.item');
        allItems.forEach(btn => btn.style.pointerEvents = 'none');
        
        setTimeout(() => {
          if (currentStep < currentLevel.length) {
            showStep();
          } else {
            finishGame();
          }
        }, 1200);
      } else {
        score = Math.max(0, score - 5);
        msg.textContent = `‚ùå ${item} n'est pas une esp√®ce √† prot√©ger.`;
        msg.className = 'message error';
        updateScore();
        
        // Effet visuel temporaire sur le bouton mal cliqu√©
        const originalBg = div.style.backgroundColor;
        const originalBorder = div.style.borderColor;
        div.style.backgroundColor = "#f8d7da";
        div.style.borderColor = "#dc3545";
        
        // Remettre l'apparence normale apr√®s 1 seconde
        setTimeout(() => {
          div.style.backgroundColor = originalBg || "#ecf0f1";
          div.style.borderColor = originalBorder || "#27ae60";
        }, 1000);
        
        // Effacer le message d'erreur apr√®s 2 secondes
        setTimeout(() => {
          msg.textContent = "";
          msg.className = "message";
        }, 2000);
      }
    }

    function finishGame() {
      const gameArea = document.getElementById('gameArea');
      gameArea.innerHTML = '';
      const msg = document.getElementById('message');
      msg.textContent = `üéâ F√©licitations ! Ton score final est ${score} points.`;
      msg.className = 'message success';
      infoDiv.textContent = '';
      levelButtons.style.display = 'flex';
    }

    function updateScore() {
      scoreDisplay.textContent = `Score: ${score}`;
    }

    function shuffle(arr) {
      return arr.sort(() => Math.random() - 0.5);
    }
  </script>
</body>
</html>
