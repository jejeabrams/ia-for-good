<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Jeu : Trouve l'intrus - Les H√©ros Invisibles</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    
    body {
      font-family: 'Arial', sans-serif;
      background: url('fond.png') center/cover no-repeat fixed,
                  linear-gradient(135deg, rgba(128,194,65,0.8) 0%, rgba(163,227,245,0.8) 100%);
      color: #2c3e50;
      min-height: 100vh;
      overflow-x: hidden;
    }
    
    .container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 15px;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
    }
    
    header {
      text-align: center;
      padding: 20px;
      background: rgba(255,255,255,0.95);
      border-radius: 25px;
      margin-bottom: 20px;
      box-shadow: 0 8px 32px rgba(0,0,0,0.1);
      backdrop-filter: blur(10px);
    }
    
    h1 { 
      color: #27ae60; 
      font-size: clamp(1.8rem, 5vw, 3rem);
      margin-bottom: 15px;
      text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
    }
    
    .subtitle {
      font-size: clamp(1.2rem, 3.5vw, 1.5rem);
      color: #34495e;
      margin-bottom: 25px;
      font-weight: bold;
    }
    
    #level-buttons { 
      display: flex; 
      gap: 15px; 
      justify-content: center;
      flex-wrap: wrap;
    }
    
    #level-buttons button {
      padding: 20px 30px;
      background: linear-gradient(135deg, #27ae60, #2ecc71);
      border: none;
      color: white;
      border-radius: 30px;
      cursor: pointer;
      font-size: clamp(1.2rem, 3vw, 1.5rem);
      font-weight: bold;
      transition: all 0.3s ease;
      box-shadow: 0 6px 20px rgba(39,174,96,0.3);
      min-width: 120px;
    }
    
    #level-buttons button:hover { 
      transform: translateY(-3px);
      box-shadow: 0 10px 30px rgba(39,174,96,0.4);
    }
    
    .game-info {
      display: flex;
      justify-content: space-between;
      align-items: center;
      background: rgba(255,255,255,0.95);
      padding: 20px 25px;
      border-radius: 20px;
      margin-bottom: 20px;
      box-shadow: 0 6px 20px rgba(0,0,0,0.1);
      flex-wrap: wrap;
      gap: 15px;
    }
    
    .score { 
      font-size: clamp(1.5rem, 4vw, 2rem);
      font-weight: bold;
      color: #27ae60;
    }
    
    .round-info {
      font-size: clamp(1.3rem, 3.5vw, 1.8rem);
      color: #34495e;
      font-weight: bold;
    }
    
    .game-area { 
      display: grid;
      gap: 20px;
      margin: 20px 0;
      flex-grow: 1;
      justify-content: center;
    }
    
    /* Grille adapt√©e selon le nombre d'options */
    .game-area.choices-4 {
      grid-template-columns: repeat(2, 1fr);
      max-width: 600px;
      margin: 20px auto;
    }
    
    .game-area.choices-6 {
      grid-template-columns: repeat(2, 1fr);
      max-width: 700px;
      margin: 20px auto;
    }
    
    .game-area.choices-8 {
      grid-template-columns: repeat(2, 1fr);
      max-width: 800px;
      margin: 20px auto;
    }
    
    .item {
      background: rgba(255,255,255,0.95);
      border: 4px solid transparent;
      border-radius: 25px;
      min-height: 200px;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      cursor: pointer;
      transition: all 0.3s ease;
      box-shadow: 0 10px 30px rgba(0,0,0,0.1);
      backdrop-filter: blur(10px);
      padding: 20px;
      position: relative;
      overflow: hidden;
    }
    
    .item::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: linear-gradient(135deg, rgba(39,174,96,0.1), rgba(46,204,113,0.1));
      opacity: 0;
      transition: opacity 0.3s ease;
    }
    
    .item:hover {
      transform: translateY(-8px) scale(1.02);
      border-color: #27ae60;
      box-shadow: 0 20px 50px rgba(39,174,96,0.2);
    }
    
    .item:hover::before {
      opacity: 1;
    }
    
    .item img { 
      width: 80%;
      height: 120px;
      object-fit: cover;
      border-radius: 15px;
      position: relative;
      z-index: 1;
      margin-bottom: 15px;
    }
    
    .item-name {
      font-size: clamp(1rem, 2.5vw, 1.3rem);
      font-weight: bold;
      color: #2c3e50;
      text-align: center;
      line-height: 1.3;
      position: relative;
      z-index: 1;
    }
    
    .message { 
      text-align: center;
      font-weight: bold; 
      font-size: clamp(1.3rem, 3.5vw, 1.8rem);
      padding: 25px;
      background: rgba(255,255,255,0.95);
      border-radius: 20px;
      margin: 20px 0;
      box-shadow: 0 6px 20px rgba(0,0,0,0.1);
      line-height: 1.4;
    }
    
    .info {
      background: rgba(255,255,255,0.95);
      border-radius: 25px;
      padding: 25px;
      margin: 20px 0;
      box-shadow: 0 10px 35px rgba(0,0,0,0.1);
      backdrop-filter: blur(10px);
      line-height: 1.6;
      font-size: clamp(1rem, 2.5vw, 1.2rem);
    }
    
    .info img {
      width: 100%;
      max-width: 250px;
      height: 180px;
      object-fit: cover;
      border-radius: 20px;
      margin: 0 auto 20px;
      display: block;
      box-shadow: 0 6px 20px rgba(0,0,0,0.2);
    }
    
    .next-button {
      background: linear-gradient(135deg, #3498db, #2980b9);
      color: white;
      border: none;
      padding: 15px 30px;
      border-radius: 25px;
      font-size: clamp(1.1rem, 3vw, 1.4rem);
      font-weight: bold;
      cursor: pointer;
      margin-top: 20px;
      box-shadow: 0 6px 20px rgba(52,152,219,0.3);
      transition: all 0.3s ease;
    }
    
    .next-button:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 25px rgba(52,152,219,0.4);
    }
    
    /* Mobile optimis√© */
    @media (max-width: 768px) {
      .container { padding: 10px; }
      
      .game-area.choices-4,
      .game-area.choices-6,
      .game-area.choices-8 {
        grid-template-columns: 1fr;
        max-width: 400px;
        gap: 15px;
      }
      
      .item {
        min-height: 180px;
        padding: 15px;
      }
      
      .item img {
        height: 100px;
      }
      
      .game-info {
        flex-direction: column;
        text-align: center;
        gap: 10px;
        padding: 15px;
      }
      
      header { 
        padding: 15px; 
        margin-bottom: 15px; 
      }
      
      .info { 
        padding: 20px; 
        margin: 15px 0; 
      }
      
      #level-buttons button {
        padding: 18px 25px;
        min-width: 100px;
      }
    }
    
    @media (max-width: 480px) {
      .item {
        min-height: 160px;
        padding: 12px;
      }
      
      .item img {
        height: 80px;
      }
      
      #level-buttons {
        flex-direction: column;
        align-items: center;
      }
      
      #level-buttons button {
        width: 200px;
      }
    }
    
    /* Animations */
    @keyframes fadeInUp {
      from { 
        opacity: 0; 
        transform: translateY(30px); 
      }
      to { 
        opacity: 1; 
        transform: translateY(0); 
      }
    }
    
    .game-area .item {
      animation: fadeInUp 0.6s ease forwards;
    }
    
    .game-area .item:nth-child(1) { animation-delay: 0.1s; }
    .game-area .item:nth-child(2) { animation-delay: 0.2s; }
    .game-area .item:nth-child(3) { animation-delay: 0.3s; }
    .game-area .item:nth-child(4) { animation-delay: 0.4s; }
    .game-area .item:nth-child(5) { animation-delay: 0.5s; }
    .game-area .item:nth-child(6) { animation-delay: 0.6s; }
    .game-area .item:nth-child(7) { animation-delay: 0.7s; }
    .game-area .item:nth-child(8) { animation-delay: 0.8s; }
  </style>
</head>
<body>
  <div class="container">
    <header>
      <h1>‚≠ê Trouve l'intrus : Les H√©ros Invisibles ‚≠ê</h1>
      <p class="subtitle">Le but ? D√©masquer l'esp√®ce en danger pour mieux la prot√©ger !</p>
      <div id="level-buttons">
        <button onclick="startGame('facile')">üü¢ Facile</button>
        <button onclick="startGame('moyen')">üü° Moyen</button>
        <button onclick="startGame('difficile')">üî¥ Difficile</button>
      </div>
    </header>

    <div class="game-info" id="gameInfo" style="display:none;">
      <div class="score" id="scoreDisplay">Score : 0</div>
      <div class="round-info" id="roundInfo">Manche 1/5</div>
    </div>

    <div class="game-area" id="gameArea"></div>
    <div class="message" id="message"></div>
    <div class="info" id="info"></div>
  </div>

  <script>
    // === LISTES DES ESP√àCES ===
    
    // ü¶∏ Intrus (esp√®ces menac√©es √† prot√©ger)
    const endangeredSpecies = [
      "M√©lib√©e",
      "Vanesse des pari√©taires", 
      "Agrion bleuissant",
      "Cordulie splendide",
      "Serratella mesoleuca",
      "Halictus carinthiacus",
      "Bourdon velout√©",
      "Criquet de la Crau",
      "Phasme du palmiste rouge",
      "Dendrobias maxillosus"
    ];

    // üêû D√©coys (esp√®ces non menac√©es)
    const commonSpecies = [
      "Chauve-souris frugivore",
      "Colibri",
      "Mouche domestique",
      "Fourmi noire",
      "Papillon commun",
      "Abeille domestique",
      "Sauterelle verte",
      "Scarab√©e commun",
      "Coccinelle √† sept points",
      "Termite des for√™ts",
      "Grillon champ√™tre",
      "Larve de coccinelle",
      "Cicadelle",
      "Lucane cerf-volant",
      "Punaise verte",
      "Mite des v√™tements",
      "Perce-oreille",
      "Loup",
      "Renard",
      "Chat",
      "Chien",
      "Pigeon"
    ];

    // === D√âFINITIONS ET GESTES DE PROTECTION ===
    const definitions = {
      // Esp√®ces menac√©es
      "M√©lib√©e": `ü¶ã **M√©lib√©e**
1. Papillon rare des prairies humides, reconnaissable √† ses ailes oranges tachet√©es de noir.
2. Pollinisateur sp√©cialis√© des fleurs de prairie, indispensable √† la biodiversit√© montagnarde.
3. Menac√© par l'ass√®chement des zones humides et l'agriculture intensive.
**Gestes** : Pr√©serve les prairies fleuries, √©vite les pesticides, cr√©e des corridors verts.`,

      "Vanesse des pari√©taires": `ü¶ã **Vanesse des pari√©taires**
1. Papillon aux ailes d√©coup√©es, d√©pendant exclusivement de la pari√©taire officinale.
2. Exemple parfait de co√©volution : chenille-plante h√¥te indissociables.
3. Menac√©e par le nettoyage urbain et l'usage d'herbicides.
**Gestes** : Laisse pousser la pari√©taire sur tes murs, √©vite les d√©sherbants chimiques.`,

      "Agrion bleuissant": `üíß **Agrion bleuissant**
1. Petite libellule bleue vivant pr√®s des cours d'eau clairs et oxyg√©n√©s.
2. Pr√©dateur de moustiques efficace, indicateur de qualit√© des milieux aquatiques.
3. Menac√© par la pollution de l'eau et l'artificialisation des berges.
**Gestes** : Prot√®ge les ruisseaux, √©vite les produits chimiques pr√®s de l'eau.`,

      "Cordulie splendide": `‚ú® **Cordulie splendide**
1. Libellule m√©tallique des mares temporaires m√©diterran√©ennes.
2. Vol spectaculaire et chasse a√©rienne remarquable contre les insectes nuisibles.
3. Menac√©e par la disparition des zones humides temporaires.
**Gestes** : Cr√©e des mares naturelles, respecte les flaques temporaires.`,

      "Serratella mesoleuca": `üí¶ **Serratella mesoleuca**
1. √âph√©m√®re aux larves aquatiques, vie adulte de quelques heures seulement.
2. Maillon essentiel de la cha√Æne alimentaire des rivi√®res.
3. Menac√©e par la pollution et la modification des cours d'eau.
**Gestes** : Prot√®ge la v√©g√©tation des berges, √©vite les rejets polluants.`,

      "Halictus carinthiacus": `üêù **Halictus carinthiacus**
1. Abeille sauvage solitaire, excellente pollinisatrice des fleurs alpines.
2. Creuse ses nids dans le sol, plus efficace que l'abeille domestique sur certaines fleurs.
3. Menac√©e par l'urbanisation et le pi√©tinement des sols.
**Gestes** : Pr√©serve les sols nus, plante des fleurs locales, √©vite le b√™chage.`,

      "Bourdon velout√©": `üêù **Bourdon velout√©**
1. Bourdon au pelage dense, sp√©cialis√© dans la pollinisation par vibration.
2. Pollinisateur irrempla√ßable des tomates et autres solanac√©es.
3. Menac√© par les pesticides et la rar√©faction des fleurs sauvages.
**Gestes** : Plante des fleurs mellif√®res, bannis les insecticides, cr√©e des abris.`,

      "Criquet de la Crau": `ü¶ó **Criquet de la Crau**
1. Criquet end√©mique de la plaine de la Crau, habitat unique au monde.
2. Indicateur de la sant√© des √©cosyst√®mes de coussouls (pelouses s√®ches).
3. Menac√© par l'urbanisation et l'agriculture intensive.
**Gestes** : Soutiens la protection des espaces naturels, respecte les pelouses s√®ches.`,

      "Phasme du palmiste rouge": `üåø **Phasme du palmiste rouge**
1. Insecte-b√¢ton tropical, ma√Ætre du camouflage dans les palmiers.
2. Herbivore sp√©cialis√©, participant √† l'√©quilibre des for√™ts tropicales.
3. Menac√© par la d√©forestation et les esp√®ces invasives.
**Gestes** : Soutiens la protection des for√™ts tropicales, choisis des produits durables.`,

      "Dendrobias maxillosus": `ü™≤ **Dendrobias maxillosus**
1. Col√©opt√®re saproxylique, d√©composeur de bois mort essentiel.
2. Indicateur de la qualit√© des vieilles for√™ts, recycleur naturel.
3. Menac√© par l'exploitation foresti√®re intensive et le nettoyage des for√™ts.
**Gestes** : Laisse du bois mort en for√™t, soutiens la gestion durable des for√™ts.`,

      // Esp√®ces communes (descriptions plus courtes)
      "Chauve-souris frugivore": `ü¶á **Chauve-souris frugivore**
Mammif√®re volant, disperse les graines des fruits.
Population stable, adaptable aux environnements vari√©s.`,

      "Colibri": `üê¶ **Colibri**
Oiseau-mouche, pollinisateur de fleurs tubulaires.
Esp√®ce commune dans son habitat naturel.`,

      "Mouche domestique": `ü™∞ **Mouche domestique**
Insecte ubiquiste, recycle la mati√®re organique.
Tr√®s commune, non menac√©e.`,

      "Fourmi noire": `üêú **Fourmi noire**
Insecte social, a√®re le sol et disperse les graines.
Population abondante et stable.`,

      "Papillon commun": `ü¶ã **Papillon commun**
Pi√©ride blanche, pollinisateur occasionnel des jardins.
Tr√®s r√©pandu, population en bonne sant√©.`,

      "Abeille domestique": `üêù **Abeille domestique**
Hym√©nopt√®re √©lev√© par l'homme, pollinisateur efficace.
G√©r√©e par l'apiculture, non sauvage.`,

      "Sauterelle verte": `ü¶ó **Sauterelle verte**
Orthopt√®re herbivore des prairies et jardins.
Commune partout, tr√®s adaptable.`,

      "Scarab√©e commun": `ü™≤ **Scarab√©e commun**
Col√©opt√®re d√©composeur, recycle la mati√®re organique.
Population stable, pas de menace particuli√®re.`,

      "Coccinelle √† sept points": `üêû **Coccinelle √† sept points**
Pr√©dateur naturel des pucerons, auxiliaire du jardinier.
Tr√®s commune, non menac√©e.`,

      "Termite des for√™ts": `üêú **Termite des for√™ts**
Insecte social d√©composeur, recycle le bois mort.
Population stable dans les for√™ts.`,

      "Grillon champ√™tre": `ü¶ó **Grillon champ√™tre**
Orthopt√®re chanteur des prairies et jardins.
Tr√®s commun, non menac√©.`,

      "Larve de coccinelle": `üêõ **Larve de coccinelle**
Stade juv√©nile de coccinelle, grand pr√©dateur de pucerons.
Abondante, non menac√©e.`,

      "Cicadelle": `ü¶ó **Cicadelle**
Petit insecte sauteur se nourrissant de s√®ve.
Tr√®s commune, non menac√©e.`,

      "Lucane cerf-volant": `ü™≤ **Lucane cerf-volant**
Grand col√©opt√®re aux mandibules impressionnantes.
Relativement commun, non menac√© globalement.`,

      "Punaise verte": `üêõ **Punaise verte**
Insecte herbivore des jardins et cultures.
Tr√®s commune, parfois consid√©r√©e comme nuisible.`,

      "Mite des v√™tements": `ü¶ã **Mite des v√™tements**
Petit papillon dont la larve mange les textiles.
Tr√®s commune dans les habitations.`,

      "Perce-oreille": `ü¶ó **Perce-oreille**
Insecte aux pinces caract√©ristiques, omnivore.
Tr√®s commun, non menac√©.`,

      "Loup": `üê∫ **Loup**
Mammif√®re carnivore, pr√©dateur apex.
Population en r√©cup√©ration, non insecte.`,

      "Renard": `ü¶ä **Renard**
Mammif√®re omnivore adaptable.
Population stable, non insecte.`,

      "Chat": `üê± **Chat**
Mammif√®re domestique, pr√©dateur d'oiseaux et petits animaux.
Tr√®s commun, non insecte.`,

      "Chien": `üê∂ **Chien**
Mammif√®re domestique, compagnon de l'homme.
Tr√®s commun, non insecte.`,

      "Pigeon": `üê¶ **Pigeon**
Oiseau urbain tr√®s adaptable.
Tr√®s commun en ville, non insecte.`
    };

    // === CONFIGURATION DU JEU ===
    const gameConfig = {
      facile: { choices: 4, rounds: 5 },
      moyen: { choices: 6, rounds: 7 },
      difficile: { choices: 8, rounds: 10 }
    };

    // Variables de jeu
    let score = 0;
    let correctStreak = 0;
    let wrongStreak = 0;
    let currentRound = 0;
    let totalRounds = 0;
    let currentLevel = '';
    let usedEndangered = [];

    const scoreDisplay = document.getElementById('scoreDisplay');
    const roundInfo = document.getElementById('roundInfo');
    const gameInfo = document.getElementById('gameInfo');
    const infoDiv = document.getElementById('info');
    const levelButtons = document.getElementById('level-buttons');
    const messageDiv = document.getElementById('message');
    const gameArea = document.getElementById('gameArea');

    // === FONCTIONS UTILITAIRES ===
    function shuffle(arr) {
      return arr.sort(() => Math.random() - 0.5);
    }

    function getImagePath(speciesName) {
      return `images/${speciesName}.jpg`;
    }

    // === D√âMARRAGE DU JEU ===
    function startGame(level) {
      currentLevel = level;
      currentRound = 0;
      score = 0;
      correctStreak = 0;
      wrongStreak = 0;
      usedEndangered = [];
      
      totalRounds = gameConfig[level].rounds;
      
      document.querySelector('header').style.display = 'none';
      gameInfo.style.display = 'flex';
      updateScore();
      updateRoundInfo();
      infoDiv.innerHTML = '';
      messageDiv.innerHTML = '';
      
      showRound();
    }

    // === AFFICHAGE D'UNE MANCHE ===
    function showRound() {
      infoDiv.innerHTML = '';
      messageDiv.innerHTML = '';
      updateRoundInfo();
      
      // Choisir un intrus qui n'a pas encore √©t√© utilis√©
      const availableEndangered = endangeredSpecies.filter(species => !usedEndangered.includes(species));
      if (availableEndangered.length === 0) {
        // Si tous ont √©t√© utilis√©s, on recommence la liste
        usedEndangered = [];
      }
      
      const intrus = availableEndangered[Math.floor(Math.random() * availableEndangered.length)];
      usedEndangered.push(intrus);
      
      // Choisir les d√©coys
      const nbChoices = gameConfig[currentLevel].choices;
      const choices = shuffle(commonSpecies).slice(0, nbChoices - 1);
      
      // M√©langer tous les √©l√©ments
      const items = shuffle([...choices, intrus]);
      
      // Afficher les cartes
      gameArea.innerHTML = '';
      gameArea.className = `game-area choices-${nbChoices}`;
      
      items.forEach((item, index) => {
        const div = document.createElement('div');
        div.className = 'item';
        div.style.animationDelay = `${index * 0.1}s`;
        
        // Container pour l'image
        const imgContainer = document.createElement('div');
        imgContainer.style.display = 'flex';
        imgContainer.style.alignItems = 'center';
        imgContainer.style.justifyContent = 'center';
        imgContainer.style.height = '120px';
        
        // Image
        const img = document.createElement('img');
        img.src = getImagePath(item);
        img.alt = item;
        img.onerror = function() {
          imgContainer.innerHTML = `<div style="text-align:center; font-size:1.2em; color:#666; padding:20px;">üì∑<br>Image<br>manquante</div>`;
        };
        imgContainer.appendChild(img);
        
        // Nom de l'esp√®ce
        const nameDiv = document.createElement('div');
        nameDiv.className = 'item-name';
        nameDiv.textContent = item;
        
        div.appendChild(imgContainer);
        div.appendChild(nameDiv);
        div.onclick = () => handleClick(item, intrus);
        gameArea.appendChild(div);
      });
    }

    // === GESTION DU CLIC ===
    function handleClick(item, intrus) {
      // Afficher les informations sur l'esp√®ce
      const detailImg = `<img src="${getImagePath(item)}" alt="${item}">`;
      infoDiv.innerHTML = detailImg + definitions[item];
      
      if (item === intrus) {
        // Bonne r√©ponse !
        wrongStreak = 0;
        correctStreak++;
        const bonus = 10 + correctStreak * 2; // 12, 14, 16...
        score += bonus;
        messageDiv.innerHTML = `
          <div style="font-size: 1.8em; margin-bottom: 15px;">‚úÖ Bravo !</div>
          <div style="margin-bottom: 15px;">Tu as prot√©g√© : <strong>${item}</strong></div>
          <div style="color: #27ae60; font-size: 1.3em;">+${bonus} points</div>
          <button class="next-button" onclick="nextRound()">
            ‚û°Ô∏è Suite
          </button>
        `;
        messageDiv.style.color = '#27ae60';
        
        currentRound++;
        updateScore();
        
      } else {
        // Mauvaise r√©ponse
        correctStreak = 0;
        wrongStreak++;
        const penalty = wrongStreak * 3;
        score = Math.max(0, score - penalty);
        messageDiv.innerHTML = `
          <div style="font-size: 1.6em; margin-bottom: 15px;">‚ùå Pas tout √† fait !</div>
          <div style="margin-bottom: 15px;"><strong>${item}</strong> n'est pas une esp√®ce √† prot√©ger</div>
          <div style="color: #e74c3c; font-size: 1.2em;">-${penalty} points</div>
          <div style="font-size: 1em; margin-top: 10px; opacity: 0.8;">Essaie encore !</div>
        `;
        messageDiv.style.color = '#e74c3c';
        updateScore();
      }
      
      // Scroll vers le message pour les enfants
      messageDiv.scrollIntoView({ behavior: 'smooth', block: 'center' });
    }

    // === FONCTION POUR PASSER √Ä LA MANCHE SUIVANTE ===
    function nextRound() {
      if (currentRound < totalRounds) {
        showRound();
      } else {
        finishGame();
      }
    }

    // === FIN DE PARTIE ===
    function finishGame() {
      gameArea.innerHTML = '';
      
      let performance = '';
      let emoji = '';
      if (score >= totalRounds * 10) { performance = 'Excellent !'; emoji = 'üèÜ'; }
      else if (score >= totalRounds * 7) { performance = 'Tr√®s bien !'; emoji = 'ü•á'; }
      else if (score >= totalRounds * 5) { performance = 'Bien !'; emoji = 'ü•à'; }
      else { performance = '√Ä am√©liorer !'; emoji = 'ü•â'; }
      
      messageDiv.innerHTML = `
        <div style="font-size: 1.5em; margin-bottom: 15px;">${emoji} ${performance}</div>
        <div style="font-size: 1.3em; margin-bottom: 10px;">Score final : <span style="color: #27ae60;">${score} points</span></div>
        <div style="font-size: 1em; opacity: 0.8;">
          Merci d'avoir jou√© pour la protection de la biodiversit√© ! üå±
        </div>
        <button onclick="restartGame()" style="
          margin-top: 20px;
          padding: 12px 24px;
          background: linear-gradient(135deg, #27ae60, #2ecc71);
          border: none;
          color: white;
          border-radius: 25px;
          cursor: pointer;
          font-size: 1em;
          font-weight: bold;
          box-shadow: 0 4px 15px rgba(39,174,96,0.3);
        ">üîÑ Rejouer</button>
      `;
      messageDiv.style.color = '#27ae60';
      
      infoDiv.innerHTML = '';
    }

    // === RED√âMARRAGE ===
    function restartGame() {
      document.querySelector('header').style.display = 'block';
      gameInfo.style.display = 'none';
      messageDiv.innerHTML = '';
      infoDiv.innerHTML = '';
      gameArea.innerHTML = '';
    }

    // === MISE √Ä JOUR DU SCORE ===
    function updateScore() {
      scoreDisplay.textContent = `Score : ${score}`;
    }

    // === MISE √Ä JOUR DES INFOS DE MANCHE ===
    function updateRoundInfo() {
      roundInfo.textContent = `Manche ${currentRound + 1}/${totalRounds}`;
    }
  </script>
</body>
</html>
